var e=Object.defineProperty,t=(t,s,n)=>(((t,s,n)=>{s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n})(t,"symbol"!=typeof s?s+"":s,n),n);import{p as s,g as n}from"./phaser-lWPI-X05.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class i extends s.Scene{constructor(){super("Boot")}preload(){this.load.spritesheet("loadingSpritesheet","assets/loadingSpritesheet.png",{frameWidth:296,frameHeight:154})}create(){this.scene.start("Preloader")}}const r="EQAX9J60va-0wIDMdqGLRMf7imJvG0Ytyi3Yxnq9y-nbNCq2";class o extends s.Scene{constructor(){super("MainMenu"),t(this,"music"),t(this,"background"),t(this,"profileButton"),t(this,"soundButton"),t(this,"telegramButton"),t(this,"titleImage"),t(this,"player"),t(this,"playButton"),t(this,"leaderboardButton"),t(this,"planeButton"),t(this,"planeButtonText"),t(this,"tonButton"),t(this,"tonButtonText"),t(this,"username"),this.username=localStorage.getItem("username")??"Guest",alert("Hello, "+this.username)}preload(){}create(){this.startMusic();const e=this.sys.game.config.width,t=this.sys.game.config.height;this.setupBackground(e,t),this.setupHeader(e,t),this.setupPlayer(e,t),this.setupFooter(e,t),this.retrievePrices()}startMusic(){this.music=this.sound.add("music",{loop:!0}),"false"===localStorage.getItem("music")?this.sound.mute=!0:this.sound.mute=!1,this.music.play({loop:!0})}setupBackground(e,t){this.background=this.add.image(e/2,t/2,"background").setOrigin(.5,.5);const s=e/this.background.width,n=t/this.background.height,i=Math.max(s,n);this.background.setScale(i),this.tweens.add({targets:this.background,scale:1.05*i,duration:3e3,yoyo:!0,ease:"Sine.easeInOut",repeat:-1})}setupHeader(e,t){this.profileButton=this.add.image(e/3,100,"profileButton").setScale(1.2).setInteractive().on("pointerdown",(()=>{console.log("Profile button clicked")}));const s="false"===localStorage.getItem("music");this.soundButton=this.add.image(e/2,100,s?"soundOff":"soundOn").setScale(1.2).setInteractive().on("pointerdown",(()=>{"false"===localStorage.getItem("music")?(this.sound.mute=!1,localStorage.setItem("music","true"),this.soundButton.setTexture("soundOn")):(this.sound.mute=!0,localStorage.setItem("music","false"),this.soundButton.setTexture("soundOff"))})),this.telegramButton=this.add.image(2*e/3,100,"telegramButton").setScale(1.2).setInteractive().on("pointerdown",(()=>{window.open("https://t.me/paperplane_ton","_blank")})),this.titleImage=this.add.image(e/2,-30,"titleImage").setOrigin(.5,0).setScale(.8),this.tweens.add({targets:this.titleImage,ease:"Sine.easeInOut",duration:2e3,repeat:-1,yoyo:!0,props:{scale:{value:"0.87",ease:"Sine.easeInOut"}}}),this.tweens.chain({targets:this.titleImage,loop:-1,tweens:[{angle:-2,duration:1e3,offset:0,ease:"Sine.easeOut"},{angle:2,duration:2e3,offset:1e3,ease:"Sine.easeInOut"},{angle:0,duration:1e3,ease:"Sine.easeIn"}]})}setupPlayer(e,t){this.player=this.add.image(e/2,.58*t,"plane");const s=e/this.player.width,n=t/this.player.height,i=Math.min(s,n);this.player.setScale(.93-i),this.tweens.add({targets:this.player,loop:-1,yoyo:!0,ease:"Sine.easeInOut",duration:1500,props:{y:"-=175"}})}setupFooter(e,t){const s=.73*t,n=.835*t,i=.94*t;this.playButton=this.add.image(e/2+60,s,"playButton").setScale(1.9,1.9).setOrigin(0,.5).setInteractive().on("pointerdown",(()=>{console.log("Stage selection")})),this.leaderboardButton=this.add.image(e/2+65,s,"leaderboardButton").setScale(1.9,2.5).setOrigin(1,.5).setInteractive().on("pointerdown",(()=>{console.log("Leaderboard button clicked")})),this.planeButton=this.add.image(e/2,n,"buttonBG").setScale(2.6,2).setOrigin(.5).setInteractive().on("pointerdown",(()=>{window.open("https://www.geckoterminal.com/ton/pools/EQC1u0sVIjCIS4ldxfOC86nQlBkOeEO7mw4VcLGxYH_ZYgXh/","_blank")})),this.planeButtonText=this.add.text(this.planeButton.x,this.planeButton.y,localStorage.getItem("planePrice")??"",{fontFamily:"Arial",fontStyle:"bold",fontSize:44,color:"#208CE7",align:"center"}).setOrigin(.5),this.tonButton=this.add.image(e/2,i,"buttonBG").setScale(2.6,2).setOrigin(.5).setInteractive().on("pointerdown",(()=>{window.open("https://coinmarketcap.com/currencies/toncoin/","_blank")})),this.tonButtonText=this.add.text(this.tonButton.x,this.tonButton.y,localStorage.getItem("tonPrice")??"",{fontFamily:"Arial",fontStyle:"bold",fontSize:44,color:"#208CE7",align:"center"}).setOrigin(.5)}async retrievePrices(){const e="https://tonapi.io/v2/rates?tokens=ton,"+r+"&currencies=usd",t=await fetch(e),s=(await t.json()).rates,n=s[r],i=n.diff_24h.USD,o=n.prices.USD,a=s.TON,c=a.diff_24h.USD,p=a.prices.USD,h="$PLANE\n$"+o.toFixed(3)+"  "+i,u="$TON\n$"+p.toFixed(2)+"  "+c,l={x:this.planeButton.x,y:this.planeButton.y},d={x:this.tonButton.x,y:this.tonButton.y};void 0===localStorage.getItem("planePrice")?this.planeButtonText=this.add.text(l.x,l.y,h,{fontFamily:"Arial",fontStyle:"bold",fontSize:44,color:"#208CE7",align:"center"}).setOrigin(.5):this.planeButtonText.setText(h),void 0===localStorage.getItem("tonPrice")?this.tonButtonText=this.add.text(d.x,d.y,u,{fontFamily:"Arial",fontStyle:"bold",fontSize:44,color:"#208CE7",align:"center"}).setOrigin(.5):this.tonButtonText.setText(u),console.log("Plane price: "+h,localStorage.getItem("planePrice")),console.log("TON price: "+u,localStorage.getItem("tonPrice")),localStorage.setItem("planePrice",h),localStorage.setItem("tonPrice",u)}}const a=n(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));!function(e){var t=a,s=a;e.sdk_version="2.151.240401",e.buildIdentifier="adobuild_nodesdk_115",e.settings={productionUrl:".playfabapi.com",verticalName:null,titleId:null,globalErrorHandler:null,developerSecretKey:null,port:443};var n=e._internalSettings={entityToken:null,sessionTicket:null,requestGetParams:{sdk:"JavaScriptSDK-2.151.240401"}};e.GetServerUrl=function(){var t=e.settings.productionUrl;return"http"!==t.substring(0,4)?e.settings.verticalName?"https://"+e.settings.verticalName+t:"https://"+e.settings.titleId+t:t},e.MakeRequest=function(i,r,o,a,c){null==r&&(r={});var p=Buffer.from(JSON.stringify(r),"utf8"),h=[i],u=n.requestGetParams;if(null!=u){var l=!0;for(var d in u)l?(h.push("?"),l=!1):h.push("&"),h.push(d),h.push("="),h.push(u[d])}var g=h.join(""),f=t.parse(g);if("https:"!==f.protocol)throw new Error("Unsupported protocol: "+f.protocol);f.method="POST",f.port=f.port||e.settings.port,f.headers={"Content-Type":"application/json","Content-Length":p.length,"X-PlayFabSDK":"NodeSDK-"+e.sdk_version+"-"+e.api_version},o&&(f.headers[o]=a);var b=s.request(f,(function(e){var t="";e.setEncoding("utf8"),e.on("data",(function(e){t+=e})),e.on("end",(function(){if(null!=c){var e=null;try{e=JSON.parse(t)}catch(s){e={code:503,status:"Service Unavailable",error:"Connection error",errorCode:2,errorMessage:t}}e.hasOwnProperty("error")||!e.hasOwnProperty("data")?c(e,null):c(null,e)}}))}));b.on("error",(function(e){null!=c&&c({code:503,status:"Service Unavailable",error:"Connection error",errorCode:2,errorMessage:e.message},null)})),b.write(p),b.end()}}({});var c=Object.defineProperty,p=(e,t,s)=>(((e,t,s)=>{t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(e,"symbol"!=typeof t?t+"":t,s),s);let h="https://web.telegram.org";const u=new class{constructor(e,t){this.prefix=e,this.enabled=t}print(e,...t){if(!this.enabled)return;const s=new Date,n=Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(s);console[e](`[${n}]`,this.prefix,...t)}disable(){this.enabled=!1}error(...e){this.print("error",...e)}enable(){this.enabled=!0}log(...e){this.print("log",...e)}warn(...e){this.print("warn",...e)}}("[SDK]",!1);function l(){return h}function d(){try{return window.self!==window.top}catch{return!0}}function g(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function f(e,t,s){let n,i={};void 0===t&&void 0===s?i={}:void 0!==t&&void 0!==s?(i=s,n=t):void 0!==t&&("targetOrigin"in t?i=t:n=t);const{targetOrigin:r=l()}=i;if(u.log(`Calling method "${e}"`,n),d())window.parent.postMessage(JSON.stringify({eventType:e,eventData:n}),r);else if(function(e){return"external"in e&&g(e.external)&&"notify"in e.external&&"function"==typeof e.external.notify}(window))window.external.notify(JSON.stringify({eventType:e,eventData:n}));else{if(!function(e){return"TelegramWebviewProxy"in e&&g(e.TelegramWebviewProxy)&&"postEvent"in e.TelegramWebviewProxy&&"function"==typeof e.TelegramWebviewProxy.postEvent}(window))throw new Error("Unable to determine current environment and possible way to send event.");window.TelegramWebviewProxy.postEvent(e,JSON.stringify(n))}}function b(e,t){return function(e,t){const s=e.split("."),n=t.split("."),i=Math.max(s.length,n.length);for(let r=0;r<i;r+=1){const e=parseInt(s[r]||"0",10),t=parseInt(n[r]||"0",10);if(e!==t)return e>t?1:-1}return 0}(e,t)<=0}function _(e,t,s){if("string"==typeof s){if("web_app_open_link"===e&&"try_instant_view"===t)return b("6.4",s);if("web_app_set_header_color"===e&&"color"===t)return b("6.9",s)}switch(e){case"web_app_open_tg_link":case"web_app_open_invoice":case"web_app_setup_back_button":case"web_app_set_background_color":case"web_app_set_header_color":case"web_app_trigger_haptic_feedback":return b("6.1",t);case"web_app_open_popup":return b("6.2",t);case"web_app_close_scan_qr_popup":case"web_app_open_scan_qr_popup":case"web_app_read_text_from_clipboard":return b("6.4",t);case"web_app_switch_inline_query":return b("6.7",t);case"web_app_invoke_custom_method":case"web_app_request_write_access":case"web_app_request_phone":return b("6.9",t);case"web_app_setup_settings_button":return b("6.10",t);default:return!0}}class m extends Error{constructor(e,t){super(`Method "${e}" is unsupported in the Mini Apps version ${t}.`),Object.setPrototypeOf(this,m.prototype)}}class w extends Error{constructor(e,t,s){super(`Parameter "${t}" in method "${e}" is unsupported in the Mini Apps version ${s}.`),Object.setPrototypeOf(this,w.prototype)}}function y(e){return({req_id:t})=>t===e}class v extends Error{constructor(e,{cause:t,type:s}={}){super("Unable to parse value"+(s?` as ${s}`:""),{cause:t}),p(this,"type"),this.value=e,Object.setPrototypeOf(this,v.prototype),this.type=s}}class E extends Error{constructor(e,{cause:t,type:s}={}){super(`Unable to parse field "${e}"${s?` as ${s}`:""}`,{cause:t}),Object.setPrototypeOf(this,E.prototype)}}function x(e,t){const s={};for(const i in e){const r=e[i];if(!r)continue;let o,a,c;if("function"==typeof r||"parse"in r)o=i,a="function"==typeof r?r:r.parse.bind(r);else{const{type:e}=r;o=r.from||i,a="function"==typeof e?e:e.parse.bind(e)}const p=t(o);try{c=a(p)}catch(n){throw new E(o,n instanceof v?{type:n.type,cause:n}:{cause:n})}void 0!==c&&(s[i]=c)}return s}function C(){return new TypeError("Value has unexpected type")}function k(e){let t=e;if("string"==typeof t&&(t=JSON.parse(t)),"object"!=typeof t||null===t||Array.isArray(t))throw C();return t}class S{constructor(e,t,s){this.parser=e,this.isOptional=t,this.type=s}parse(e){if(!this.isOptional||void 0!==e)try{return this.parser(e)}catch(t){throw new v(e,{type:this.type,cause:t})}}optional(){return this.isOptional=!0,this}}function P(e,t){return new S((t=>{const s=k(t);return x(e,(e=>s[e]))}),!1,t)}function O(e,t){return()=>new S(e,!1,t)}const I=O((e=>{if("string"==typeof e||"number"==typeof e)return e.toString();throw C()}),"string");function q(e,t){window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify({eventType:e,eventData:t}),source:window.parent}))}function B(e){return/^#[\da-f]{6}$/i.test(e)}function A(e){const t=e.replace(/\s/g,"").toLowerCase();if(B(t))return t;if(function(e){return/^#[\da-f]{3}$/i.test(e)}(t)){let e="#";for(let s=0;s<3;s+=1)e+=t[1+s].repeat(2);return e}const s=t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||t.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),\d{1,3}\)$/);if(null===s)throw new Error(`Value "${e}" does not satisfy any of known RGB formats.`);return s.slice(1).reduce(((e,t)=>{const s=parseInt(t,10).toString(16);return e+(1===s.length?"0":"")+s}),"#")}const T=O((e=>A(I().parse(e))),"rgb"),V=O((e=>{if("boolean"==typeof e)return e;const t=String(e);if("1"===t||"true"===t)return!0;if("0"===t||"false"===t)return!1;throw C()}),"boolean"),D=O((e=>{if("number"==typeof e)return e;if("string"==typeof e){const t=Number(e);if(!Number.isNaN(t))return t}throw C()}),"number");class L{constructor(){p(this,"listeners",new Map),p(this,"subscribeListeners",[])}addListener(e,t,s){let n=this.listeners.get(e);return n||(n=[],this.listeners.set(e,n)),n.push([t,s]),()=>this.off(e,t)}emit(e,...t){this.subscribeListeners.forEach((s=>s(e,...t)));const s=this.listeners.get(e);s&&s.forEach((([e,n],i)=>{e(...t),n&&s.splice(i,1)}))}on(e,t){return this.addListener(e,t,!1)}once(e,t){return this.addListener(e,t,!0)}off(e,t){const s=this.listeners.get(e);if(s)for(let n=0;n<s.length;n+=1)if(t===s[n][0])return void s.splice(n,1)}subscribe(e){return this.subscribeListeners.push(e),()=>this.unsubscribe(e)}unsubscribe(e){for(let t=0;t<this.subscribeListeners.length;t+=1)if(this.subscribeListeners[t]===e)return void this.subscribeListeners.splice(t,1)}}function N(){const e=new L,t=(t,...s)=>{u.log("Emitting processed event:",t,...s),e.emit(t,...s)};return window.addEventListener("resize",(()=>{t("viewport_changed",{width:window.innerWidth,height:window.innerHeight,is_state_stable:!0,is_expanded:!0})})),function(e){(function(){const e=window;"TelegramGameProxy_receiveEvent"in e||[["TelegramGameProxy_receiveEvent"],["TelegramGameProxy","receiveEvent"],["Telegram","WebView","receiveEvent"]].forEach((t=>{let s=e;t.forEach(((e,t,n)=>{t!==n.length-1?(e in s||(s[e]={}),s=s[e]):s[e]=q}))}))})(),window.addEventListener("message",(t=>{if(t.source===window.parent)try{const{eventType:s,eventData:n}=function(e){return P({eventType:I(),eventData:e=>e}).parse(e)}(t.data);e(s,n)}catch{}}))}(((e,s)=>{u.log("Received raw event:",e,s);try{switch(e){case"viewport_changed":return t(e,P({height:D(),width:e=>null==e?window.innerWidth:D().parse(e),is_state_stable:V(),is_expanded:V()}).parse(s));case"theme_changed":return t(e,P({theme_params:e=>{const t=T().optional();return Object.entries(k(e)).reduce(((e,[s,n])=>(e[s]=t.parse(n),e)),{})}}).parse(s));case"popup_closed":return t(e,null==s?{}:P({button_id:e=>null==e?void 0:I().parse(e)}).parse(s));case"set_custom_style":return t(e,I().parse(s));case"qr_text_received":return t(e,P({data:I().optional()}).parse(s));case"clipboard_text_received":return t(e,P({req_id:I(),data:e=>null===e?e:I().optional().parse(e)}).parse(s));case"invoice_closed":return t(e,P({slug:I(),status:I()}).parse(s));case"phone_requested":return t("phone_requested",P({status:I()}).parse(s));case"custom_method_invoked":return t("custom_method_invoked",P({req_id:I(),result:e=>e,error:I().optional()}).parse(s));case"write_access_requested":return t("write_access_requested",P({status:I()}).parse(s));case"main_button_pressed":case"back_button_pressed":case"settings_button_pressed":case"scan_qr_popup_closed":case"reload_iframe":return t(e);default:return t(e,s)}}catch(n){u.error("Error processing event:",n)}})),e}const $="telegram-mini-apps-cached-emitter";function R(){const e=window;return void 0===e[$]&&(e[$]=N()),e[$]}function W(e,t){R().off(e,t)}function M(e,t){return R().on(e,t),()=>W(e,t)}class H extends Error{constructor(e){super(`Async call timeout exceeded. Timeout: ${e}`),Object.setPrototypeOf(this,H.prototype)}}function U(e){return new Promise(((t,s)=>{setTimeout(s,e,new H(e))}))}function j(e,t){return Promise.race(["function"==typeof e?e():e,U(t)])}async function G(e,t,s){let n;const i=new Promise((e=>{n=e})),r=t?{...s,event:t,method:e}:e,{method:o,event:a,capture:c,postEvent:p=f,timeout:h}=r,u=(Array.isArray(a)?a:[a]).map((e=>M(e,(e=>(!c||c(e))&&n(e)))));try{return p(o,r.params),await(h?j(i,h):i)}finally{u.forEach((e=>e()))}}async function z(e,t,s,n={}){const{result:i,error:r}=await G("web_app_invoke_custom_method","custom_method_invoked",{...n,params:{method:e,params:t,req_id:s},capture:y(s)});if(r)throw new Error(r);return i}function J(e){const t=A(e);return Math.sqrt([.299,.587,.114].reduce(((e,s,n)=>{const i=parseInt(t.slice(1+2*n,1+2*(n+1)),16);return e+i*i*s}),0))<120}class F{constructor(e,t){this.state=e,this.ee=t}internalSet(e,t){return this.state[e]!==t&&void 0!==t&&(this.state[e]=t,this.ee.emit(`change:${e}`,t),!0)}clone(){return{...this.state}}set(e,t){let s=!1;if("string"==typeof e)s=this.internalSet(e,t);else for(const n in e)this.internalSet(n,e[n])&&(s=!0);s&&this.ee.emit("change")}get(e){return this.state[e]}}function K(e,t){return s=>_(t[s],e)}class Q{constructor(e,t,s=f){p(this,"ee",new L),p(this,"state"),p(this,"on",((e,t)=>"click"===e?M("back_button_pressed",t):this.ee.on(e,t))),p(this,"off",((e,t)=>"click"===e?W("back_button_pressed",t):this.ee.off(e,t))),p(this,"supports"),this.postEvent=s,this.state=new F({isVisible:e},this.ee),this.supports=K(t,{show:"web_app_setup_back_button",hide:"web_app_setup_back_button"})}set isVisible(e){this.state.set("isVisible",e),this.postEvent("web_app_setup_back_button",{is_visible:e})}get isVisible(){return this.state.get("isVisible")}hide(){this.isVisible=!1}show(){this.isVisible=!0}}class X{constructor(e,t=f){p(this,"ee",new L),p(this,"state"),p(this,"on",this.ee.on.bind(this.ee)),p(this,"off",this.ee.off.bind(this.ee)),this.postEvent=t,this.state=new F({isConfirmationNeeded:e},this.ee)}set isConfirmationNeeded(e){this.state.set("isConfirmationNeeded",e),this.postEvent("web_app_setup_closing_behavior",{need_confirmation:e})}get isConfirmationNeeded(){return this.state.get("isConfirmationNeeded")}disableConfirmation(){this.isConfirmationNeeded=!1}enableConfirmation(){this.isConfirmationNeeded=!0}}function Z(e){if(Array.isArray(e))return e;if("string"==typeof e)try{const t=JSON.parse(e);if(Array.isArray(t))return t}catch{}throw C()}class Y extends S{constructor(e,t,s){super(Z,t,s),p(this,"itemParser"),this.itemParser="function"==typeof e?e:e.parse.bind(e)}parse(e){const t=super.parse(e);return void 0===t?t:t.map(this.itemParser)}of(e){return this.itemParser="function"==typeof e?e:e.parse.bind(e),this}}function ee(e,t){return e.reduce(((e,s)=>(e[s]=t,e)),{})}class te{constructor(e,t,s=f){p(this,"supports"),this.createRequestId=t,this.postEvent=s,this.supports=K(e,{delete:"web_app_invoke_custom_method",get:"web_app_invoke_custom_method",getKeys:"web_app_invoke_custom_method",set:"web_app_invoke_custom_method"})}async delete(e,t={}){const s=Array.isArray(e)?e:[e];0!==s.length&&await z("deleteStorageValues",{keys:s},this.createRequestId(),{...t,postEvent:this.postEvent})}async getKeys(e={}){const t=await z("getStorageKeys",{},this.createRequestId(),{...e,postEvent:this.postEvent});return new Y((e=>e),!1,undefined).of(I()).parse(t)}async get(e,t={}){const s=Array.isArray(e)?e:[e];if(0===s.length)return ee(s,"");const n=P(ee(s,I())),i=await z("getStorageValues",{keys:s},this.createRequestId(),{...t,postEvent:this.postEvent}).then((e=>n.parse(e)));return Array.isArray(e)?i:i[e]}async set(e,t,s={}){await z("saveStorageValue",{key:e,value:t},this.createRequestId(),{...s,postEvent:this.postEvent})}}class se{constructor(e,t=f){p(this,"supports"),this.postEvent=t,this.supports=K(e,{impactOccurred:"web_app_trigger_haptic_feedback",notificationOccurred:"web_app_trigger_haptic_feedback",selectionChanged:"web_app_trigger_haptic_feedback"})}impactOccurred(e){this.postEvent("web_app_trigger_haptic_feedback",{type:"impact",impact_style:e})}notificationOccurred(e){this.postEvent("web_app_trigger_haptic_feedback",{type:"notification",notification_type:e})}selectionChanged(){this.postEvent("web_app_trigger_haptic_feedback",{type:"selection_change"})}}class ne{constructor(e){this.initData=e}get authDate(){return this.initData.authDate}get canSendAfter(){return this.initData.canSendAfter}get canSendAfterDate(){const{canSendAfter:e}=this;return void 0===e?void 0:new Date(this.authDate.getTime()+1e3*e)}get chat(){return this.initData.chat}get chatType(){return this.initData.chatType}get chatInstance(){return this.initData.chatInstance}get hash(){return this.initData.hash}get queryId(){return this.initData.queryId}get receiver(){return this.initData.receiver}get startParam(){return this.initData.startParam}get user(){return this.initData.user}}function ie(){return P({addedToAttachmentMenu:{type:V().optional(),from:"added_to_attachment_menu"},allowsWriteToPm:{type:V().optional(),from:"allows_write_to_pm"},firstName:{type:I(),from:"first_name"},id:D(),isBot:{type:V().optional(),from:"is_bot"},isPremium:{type:V().optional(),from:"is_premium"},languageCode:{type:I().optional(),from:"language_code"},lastName:{type:I().optional(),from:"last_name"},photoUrl:{type:I().optional(),from:"photo_url"},username:I().optional()},"User")}const re=O((e=>e instanceof Date?e:new Date(1e3*D().parse(e))),"Date");function oe(e,t){return new S((t=>{if("string"!=typeof t&&!(t instanceof URLSearchParams))throw C();const s="string"==typeof t?new URLSearchParams(t):t;return x(e,(e=>{const t=s.get(e);return null===t?void 0:t}))}),!1,t)}class ae{constructor(e,t=f){p(this,"ee",new L),p(this,"state"),p(this,"on",this.ee.on.bind(this.ee)),p(this,"off",this.ee.off.bind(this.ee)),p(this,"supports"),this.postEvent=t,this.state=new F({isOpened:!1},this.ee),this.supports=K(e,{open:"web_app_open_invoice"})}set isOpened(e){this.state.set("isOpened",e)}get isOpened(){return this.state.get("isOpened")}async open(e,t){if(this.isOpened)throw new Error("Invoice is already opened");const s=t?function(e){const{hostname:t,pathname:s}=new URL(e,window.location.href);if("t.me"!==t)throw new Error(`Incorrect hostname: ${t}`);const n=s.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/);if(null===n)throw new Error('Link pathname has incorrect format. Expected to receive "/invoice/{slug}" or "/${slug}"');return n[2]}(e):e;this.isOpened=!0;try{return(await G("web_app_open_invoice","invoice_closed",{params:{slug:s},postEvent:this.postEvent,capture:e=>s===e.slug})).status}finally{this.isOpened=!1}}}class ce{constructor(e){p(this,"ee",new L),p(this,"state"),p(this,"postEvent"),p(this,"on",((e,t)=>"click"===e?M("main_button_pressed",t):this.ee.on(e,t))),p(this,"off",((e,t)=>"click"===e?W("main_button_pressed",t):this.ee.off(e,t)));const{postEvent:t=f,text:s,textColor:n,backgroundColor:i,isEnabled:r,isVisible:o,isLoaderVisible:a}=e;this.postEvent=t,this.state=new F({backgroundColor:i,isEnabled:r,isVisible:o,isLoaderVisible:a,text:s,textColor:n},this.ee)}commit(){""!==this.text&&this.postEvent("web_app_setup_main_button",{is_visible:this.isVisible,is_active:this.isEnabled,is_progress_visible:this.isLoaderVisible,text:this.text,color:this.backgroundColor,text_color:this.textColor})}set isEnabled(e){this.setParams({isEnabled:e})}get isEnabled(){return this.state.get("isEnabled")}set isLoaderVisible(e){this.setParams({isLoaderVisible:e})}get isLoaderVisible(){return this.state.get("isLoaderVisible")}set isVisible(e){this.setParams({isVisible:e})}get isVisible(){return this.state.get("isVisible")}get backgroundColor(){return this.state.get("backgroundColor")}get text(){return this.state.get("text")}get textColor(){return this.state.get("textColor")}disable(){return this.isEnabled=!1,this}enable(){return this.isEnabled=!0,this}hide(){return this.isVisible=!1,this}hideLoader(){return this.isLoaderVisible=!1,this}show(){return this.isVisible=!0,this}showLoader(){return this.isLoaderVisible=!0,this}setText(e){return this.setParams({text:e})}setTextColor(e){return this.setParams({textColor:e})}setBackgroundColor(e){return this.setParams({backgroundColor:e})}setParams(e){return this.state.set(e),this.commit(),this}}const pe=oe({contact:P({userId:{type:D(),from:"user_id"},phoneNumber:{type:I(),from:"phone_number"},firstName:{type:I(),from:"first_name"},lastName:{type:I().optional(),from:"last_name"}}),authDate:{type:re(),from:"auth_date"},hash:I()});function he(e,t){return s=>{const[n,i]=t[s];return _(n,i,e)}}function ue(e){return new Promise((t=>{setTimeout(t,e)}))}class le{constructor(e){p(this,"ee",new L),p(this,"state"),p(this,"botInline"),p(this,"postEvent"),p(this,"createRequestId"),p(this,"requestingPhoneAccess",!1),p(this,"requestingWriteAccess",!1),p(this,"on",this.ee.on.bind(this.ee)),p(this,"off",this.ee.off.bind(this.ee)),p(this,"supports"),p(this,"supportsParam");const{postEvent:t=f,headerColor:s,backgroundColor:n,version:i,botInline:r,createRequestId:o}=e,a=K(i,{requestPhoneAccess:"web_app_request_phone",requestWriteAccess:"web_app_request_write_access",switchInlineQuery:"web_app_switch_inline_query",setHeaderColor:"web_app_set_header_color",setBackgroundColor:"web_app_set_background_color"});this.postEvent=t,this.botInline=r,this.createRequestId=o,this.supports=e=>!(!a(e)||"switchInlineQuery"===e&&!r),this.state=new F({backgroundColor:n,headerColor:s},this.ee),this.supportsParam=he(i,{"setHeaderColor.color":["web_app_set_header_color","color"]})}async getRequestedContact(){return z("getRequestedContact",{},this.createRequestId(),{postEvent:this.postEvent,timeout:1e4}).then((e=>pe.parse(e)))}get backgroundColor(){return this.state.get("backgroundColor")}close(){this.postEvent("web_app_close")}get headerColor(){return this.state.get("headerColor")}get isBotInline(){return this.botInline}get isDark(){return J(this.backgroundColor)}get isRequestingPhoneAccess(){return this.requestingPhoneAccess}get isRequestingWriteAccess(){return this.requestingWriteAccess}ready(){this.postEvent("web_app_ready")}async requestContact({timeout:e=5e3}={}){try{return await this.getRequestedContact()}catch{}if("sent"!==await this.requestPhoneAccess())throw new Error("Access denied.");const t=Date.now()+e;let s=50;return j((async()=>{for(;Date.now()<t;){try{return await this.getRequestedContact()}catch{}await ue(s),s+=50}throw new Error("Unable to retrieve requested contact.")}),e)}requestPhoneAccess(e={}){if(this.requestingPhoneAccess)throw new Error("Phone access is already being requested.");return this.requestingPhoneAccess=!0,G("web_app_request_phone","phone_requested",{...e,postEvent:this.postEvent}).then((e=>e.status)).finally((()=>{this.requestingPhoneAccess=!1}))}requestWriteAccess(e={}){if(this.requestingWriteAccess)throw new Error("Write access is already being requested.");return this.requestingWriteAccess=!0,G("web_app_request_write_access","write_access_requested",{...e,postEvent:this.postEvent}).then((e=>e.status)).finally((()=>{this.requestingWriteAccess=!1}))}sendData(e){const{size:t}=new Blob([e]);if(0===t||t>4096)throw new Error(`Passed data has incorrect size: ${t}`);this.postEvent("web_app_data_send",{data:e})}setHeaderColor(e){this.postEvent("web_app_set_header_color",B(e)?{color:e}:{color_key:e}),this.state.set("headerColor",e)}setBackgroundColor(e){this.postEvent("web_app_set_background_color",{color:e}),this.state.set("backgroundColor",e)}switchInlineQuery(e,t=[]){if(!this.supports("switchInlineQuery")&&!this.isBotInline)throw new Error("Method is unsupported because Mini App should be launched in inline mode.");this.postEvent("web_app_switch_inline_query",{query:e,chat_types:t})}}function de(e){const t=e.message.trim(),s=(e.title||"").trim(),n=e.buttons||[];let i;if(s.length>64)throw new Error(`Title has incorrect size: ${s.length}`);if(0===t.length||t.length>256)throw new Error(`Message has incorrect size: ${t.length}`);if(n.length>3)throw new Error(`Buttons have incorrect size: ${n.length}`);return i=0===n.length?[{type:"close",id:""}]:n.map((e=>{const{id:t=""}=e;if(t.length>64)throw new Error(`Button ID has incorrect size: ${t}`);if(void 0===e.type||"default"===e.type||"destructive"===e.type){const s=e.text.trim();if(0===s.length||s.length>64){const t=e.type||"default";throw new Error(`Button text with type "${t}" has incorrect size: ${e.text.length}`)}return{...e,text:s,id:t}}return{...e,id:t}})),{title:s,message:t,buttons:i}}class ge{constructor(e,t=f){p(this,"ee",new L),p(this,"state"),p(this,"on",this.ee.on.bind(this.ee)),p(this,"off",this.ee.off.bind(this.ee)),p(this,"supports"),this.postEvent=t,this.state=new F({isOpened:!1},this.ee),this.supports=K(e,{open:"web_app_open_popup"})}set isOpened(e){this.state.set("isOpened",e)}get isOpened(){return this.state.get("isOpened")}open(e){if(this.isOpened)throw new Error("Popup is already opened.");return this.isOpened=!0,G("web_app_open_popup","popup_closed",{postEvent:this.postEvent,params:de(e)}).then((({button_id:e=null})=>e)).finally((()=>{this.isOpened=!1}))}}class fe{constructor(e,t=f){p(this,"ee",new L),p(this,"state"),p(this,"on",this.ee.on.bind(this.ee)),p(this,"off",this.ee.off.bind(this.ee)),p(this,"supports"),this.postEvent=t,this.state=new F({isOpened:!1},this.ee),this.supports=K(e,{close:"web_app_close_scan_qr_popup",open:"web_app_open_scan_qr_popup"})}close(){this.postEvent("web_app_close_scan_qr_popup"),this.isOpened=!1}set isOpened(e){this.state.set("isOpened",e)}get isOpened(){return this.state.get("isOpened")}async open(e){if(this.isOpened)throw new Error("QR scanner is already opened.");this.isOpened=!0;try{const t=await G("web_app_open_scan_qr_popup",["qr_text_received","scan_qr_popup_closed"],{postEvent:this.postEvent,params:{text:e}});return"object"==typeof t&&"string"==typeof t.data?t.data:null}finally{this.isOpened=!1}}}class be{constructor(e,t,s=f){p(this,"ee",new L),p(this,"state"),p(this,"on",((e,t)=>"click"===e?M("settings_button_pressed",t):this.ee.on(e,t))),p(this,"off",((e,t)=>"click"===e?W("settings_button_pressed",t):this.ee.off(e,t))),p(this,"supports"),this.postEvent=s,this.state=new F({isVisible:e},this.ee),this.supports=K(t,{show:"web_app_setup_settings_button",hide:"web_app_setup_settings_button"})}set isVisible(e){this.state.set("isVisible",e),this.postEvent("web_app_setup_settings_button",{is_visible:e})}get isVisible(){return this.state.get("isVisible")}hide(){this.isVisible=!1}show(){this.isVisible=!0}}const _e=O((e=>{const t=T().optional();return Object.entries(k(e)).reduce(((e,[s,n])=>(e[function(e){return e.replace(/(^|_)bg/,((e,t)=>`${t}background`)).replace(/_([a-z])/g,((e,t)=>t.toUpperCase()))}(s)]=t.parse(n),e)),{})}),"ThemeParams");class me{constructor(e){p(this,"ee",new L),p(this,"state"),p(this,"on",this.ee.on.bind(this.ee)),p(this,"off",this.ee.off.bind(this.ee)),this.state=new F(e,this.ee)}get accentTextColor(){return this.get("accentTextColor")}get backgroundColor(){return this.get("backgroundColor")}get buttonColor(){return this.get("buttonColor")}get buttonTextColor(){return this.get("buttonTextColor")}get destructiveTextColor(){return this.get("destructiveTextColor")}get(e){return this.state.get(e)}getState(){return this.state.clone()}get headerBackgroundColor(){return this.get("headerBackgroundColor")}get hintColor(){return this.get("hintColor")}get isDark(){return!this.backgroundColor||J(this.backgroundColor)}get linkColor(){return this.get("linkColor")}get secondaryBackgroundColor(){return this.get("secondaryBackgroundColor")}get sectionBackgroundColor(){return this.get("sectionBackgroundColor")}get sectionHeaderTextColor(){return this.get("sectionHeaderTextColor")}listen(){return M("theme_changed",(e=>{var t;this.state.set((t=e.theme_params,_e().parse(t)))}))}get subtitleTextColor(){return this.get("subtitleTextColor")}get textColor(){return this.get("textColor")}}class we{constructor(e,t,s=f){p(this,"supports"),p(this,"supportsParam"),this.version=e,this.createRequestId=t,this.postEvent=s,this.supports=K(e,{readTextFromClipboard:"web_app_read_text_from_clipboard"}),this.supportsParam=he(e,{"openLink.tryInstantView":["web_app_open_link","try_instant_view"]})}openLink(e,t){const s=new URL(e,window.location.href).toString();_("web_app_open_link",this.version)?this.postEvent("web_app_open_link",{url:s,..."boolean"==typeof t?{try_instant_view:t}:{}}):window.open(s,"_blank")}openTelegramLink(e){const{hostname:t,pathname:s,search:n}=new URL(e,window.location.href);if("t.me"!==t)throw new Error(`URL has not allowed hostname: ${t}. Only "t.me" is allowed`);_("web_app_open_tg_link",this.version)?this.postEvent("web_app_open_tg_link",{path_full:s+n}):window.location.href=e}async readTextFromClipboard(){const e=this.createRequestId(),{data:t=null}=await G("web_app_read_text_from_clipboard","clipboard_text_received",{postEvent:this.postEvent,params:{req_id:e},capture:y(e)});return t}}async function ye(e){const t=await G("web_app_request_viewport","viewport_changed",e);return{height:t.height,width:t.width,isExpanded:t.is_expanded,isStateStable:t.is_state_stable}}function ve(e){return e<0?0:e}class Ee{constructor(e){p(this,"ee",new L),p(this,"state"),p(this,"postEvent"),p(this,"on",this.ee.on.bind(this.ee)),p(this,"off",this.ee.off.bind(this.ee));const{height:t,isExpanded:s,width:n,stableHeight:i,postEvent:r=f}=e;this.postEvent=r,this.state=new F({height:ve(t),isExpanded:s,stableHeight:ve(i),width:ve(n)},this.ee)}sync(e){return ye(e).then((({height:e,isExpanded:t,width:s,isStateStable:n})=>{this.state.set({height:e,width:s,isExpanded:t,stableHeight:n?e:this.state.get("stableHeight")})}))}get height(){return this.state.get("height")}get stableHeight(){return this.state.get("stableHeight")}listen(){return M("viewport_changed",(e=>{const{height:t,width:s,is_expanded:n,is_state_stable:i}=e,r={height:ve(t),isExpanded:n,width:ve(s)};i&&(r.stableHeight=r.height),this.state.set(r)}))}get isExpanded(){return this.state.get("isExpanded")}get width(){return this.state.get("width")}expand(){this.postEvent("web_app_expand"),this.state.set("isExpanded",!0)}get isStable(){return this.stableHeight===this.height}}function xe(e,t){document.documentElement.style.setProperty(e,t)}function Ce(e){const t=()=>xe("--tg-viewport-height",`${e.height}px`),s=()=>xe("--tg-viewport-width",`${e.width}px`),n=()=>xe("--tg-viewport-stable-height",`${e.stableHeight}px`);e.on("change:height",t),e.on("change:width",s),e.on("change:stableHeight",n),t(),s(),n()}function ke(e){return`telegram-mini-apps-${e}`}function Se(e,t){sessionStorage.setItem(ke(e),JSON.stringify(t))}function Pe(e){const t=sessionStorage.getItem(ke(e));return t?JSON.parse(t):null}function Oe(e,t,s){const{isVisible:n=!1}=e&&Pe("back-button")||{},i=new Q(n,t,s);return i.on("change",(()=>{Se("back-button",{isVisible:i.isVisible})})),i}function Ie(e,t){const{isConfirmationNeeded:s=!1}=e&&Pe("closing-behavior")||{},n=new X(s,t);return n.on("change",(()=>Se("closing-behavior",{isConfirmationNeeded:n.isConfirmationNeeded}))),n}function qe(e,t,s,n){const{backgroundColor:i=t,isEnabled:r=!1,isVisible:o=!1,isLoaderVisible:a=!1,textColor:c=s,text:p=""}=e&&Pe("main-button")||{},h=new ce({backgroundColor:i,isEnabled:r,isLoaderVisible:a,isVisible:o,postEvent:n,text:p,textColor:c});return h.on("change",(()=>Se("main-button",{backgroundColor:h.backgroundColor,isEnabled:h.isEnabled,isLoaderVisible:h.isLoaderVisible,isVisible:h.isVisible,text:h.text,textColor:h.textColor}))),h}function Be(e,t,s,n,i,r){const{backgroundColor:o=t,headerColor:a="bg_color"}=e&&Pe("mini-app")||{},c=new le({headerColor:a,backgroundColor:o,version:s,botInline:n,createRequestId:i,postEvent:r});return c.on("change",(()=>Se("mini-app",{backgroundColor:c.backgroundColor,headerColor:c.headerColor}))),c}function Ae(e,t,s){const{isVisible:n=!1}=e&&Pe("settings-button")||{},i=new be(n,t,s);return i.on("change",(()=>{Se("settings-button",{isVisible:i.isVisible})})),i}function Te(e){const t=new me(e);return t.listen(),t}function Ve(e){const t=new Ee(e);return t.on("change",(()=>Se("viewport",{height:t.height,isExpanded:t.isExpanded,stableHeight:t.stableHeight,width:t.width}))),t.listen(),t}function De(e,t,s,n){const i=function(e){return"object"==typeof e?e:e?{themeParams:!0,viewport:!0,miniApp:!0}:{}}(e);i.miniApp&&function(e,t){const s=()=>{xe("--tg-background-color",e.backgroundColor)},n=()=>{const{backgroundColor:s,secondaryBackgroundColor:n}=t;B(e.headerColor)?xe("--tg-header-color",e.headerColor):"bg_color"===e.headerColor&&s?xe("--tg-header-color",s):"secondary_bg_color"===e.headerColor&&n&&xe("--tg-header-color",n)};t.on("change",n),e.on("change:backgroundColor",s),e.on("change:headerColor",n),s(),n()}(t,s),i.themeParams&&function(e){const t=()=>{const t=e.getState();Object.entries(t).forEach((([e,t])=>{t&&xe(`--tg-theme-${e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}`,t)}))};e.on("change",t),t()}(s),i.viewport&&(n instanceof Promise?n.then(Ce):Ce(n))}function Le(e){return oe({botInline:{type:V().optional(),from:"tgWebAppBotInline"},initData:{type:oe({authDate:{type:re(),from:"auth_date"},canSendAfter:{type:D().optional(),from:"can_send_after"},chat:P({id:D(),type:I(),title:I(),photoUrl:{type:I().optional(),from:"photo_url"},username:I().optional()},"Chat").optional(),chatInstance:{type:I().optional(),from:"chat_instance"},chatType:{type:I().optional(),from:"chat_type"},hash:I(),queryId:{type:I().optional(),from:"query_id"},receiver:ie().optional(),startParam:{type:I().optional(),from:"start_param"},user:ie().optional()},"InitData").optional(),from:"tgWebAppData"},initDataRaw:{type:I().optional(),from:"tgWebAppData"},platform:{type:I(),from:"tgWebAppPlatform"},showSettings:{type:V().optional(),from:"tgWebAppShowSettings"},startParam:{type:I().optional(),from:"tgWebAppStartParam"},themeParams:{type:_e(),from:"tgWebAppThemeParams"},version:{type:I(),from:"tgWebAppVersion"}},"LaunchParams").parse(e)}function Ne(e){return Le(e.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&"))}function $e(){return Ne(window.location.href)}function Re(){return performance.getEntriesByType("navigation")[0]}function We(){const e=Re();if(!e)throw new Error("Unable to get first navigation entry.");return Ne(e.name)}const Me="telegram-mini-apps-launch-params";function He(){return Le(sessionStorage.getItem(Me)||"")}function Ue(e){sessionStorage.setItem(Me,function(e){const{initDataRaw:t,themeParams:s,platform:n,version:i,showSettings:r,startParam:o,botInline:a}=e,c=new URLSearchParams;return t&&c.set("tgWebAppData",t),c.set("tgWebAppPlatform",n),c.set("tgWebAppThemeParams",function(e){return JSON.stringify(Object.entries(e).reduce(((e,[t,s])=>(s&&(e[function(e){return e.replace(/[A-Z]/g,(e=>`_${e.toLowerCase()}`)).replace(/(^|_)background/,((e,t)=>`${t}bg`))}(t)]=s),e)),{}))}(s)),c.set("tgWebAppVersion",i),o&&c.set("tgWebAppStartParam",o),"boolean"==typeof r&&c.set("tgWebAppShowSettings",r?"1":"0"),"boolean"==typeof a&&c.set("tgWebAppBotInline",a?"1":"0"),c.toString()}(e))}class je extends s.Scene{constructor(){super("Preloader")}init(){const e=this.sys.game.config.width,t=this.sys.game.config.height,s=this.add.rectangle(0,.6*t,0,28,16777215),n=this.add.text(512,.63*t+64,"Starting Jets . . . 0%",{fontFamily:"Arial",fontStyle:"bold",fontSize:64,color:"#fff"}).setOrigin(.5).setX(e/2);this.load.on("progress",(t=>{s.width=e*t,n.setText("Starting Jets . . . "+Math.floor(100*t)+"%"),n.setX(e/2)}))}preload(){this.load.audio("music","sounds/music.ogg");const e=Math.floor(7*Math.random())+1;this.load.image("background","assets/bg_"+e+".png"),this.load.image("plane","assets/player_0.png"),this.load.image("profileButton","assets/profileButton.png"),this.load.image("soundOn","assets/soundOn.png"),this.load.image("soundOff","assets/soundOff.png"),this.load.image("telegramButton","assets/telegramButton.png"),this.load.image("titleImage","assets/titleImage.png"),this.load.image("playButton","assets/playButton.png"),this.load.image("leaderboardButton","assets/leaderboardButton.png"),this.load.image("buttonBG","assets/buttonBG.png")}create(){const e=this.sys.game.config.width,t=this.sys.game.config.height;this.anims.create({key:"loading",frames:this.anims.generateFrameNumbers("loadingSpritesheet",{start:0,end:42}),frameRate:30,repeat:-1});const s=this.add.sprite(e/2,.33*t,"loadingSpritesheet").play("loading"),n=e/s.width,i=t/s.height,r=Math.min(n,i);s.setScale(r-1),function(e={}){const{async:t=!1,complete:s=t,cssVars:n=!1,acceptCustomStyles:i=!1}=e;try{const{initData:e,initDataRaw:t,version:r,platform:o,themeParams:a,botInline:c=!1}=function(){const e=[];for(const t of[$e,We,He])try{const e=t();return Ue(e),e}catch(s){e.push(s)}throw u.error("Unable to extract launch parameters. Received errors:",e),new Error("Unable to retrieve launch parameters from any known source.")}(),p=function(){var e;return"reload"===(null==(e=Re())?void 0:e.type)}(),h=function(){let e=0;return()=>(e+=1,e.toString())}(),l=function(e){return(t,s)=>{if(!_(t,e))throw new m(t,e);if(g(s)){let n;if("web_app_open_link"===t&&"try_instant_view"in s?n="try_instant_view":"web_app_set_header_color"===t&&"color"in s&&(n="color"),n&&!_(t,n,e))throw new w(t,n,e)}return f(t,s)}}(r);d()&&(i&&function(){const e=document.createElement("style");e.id="telegram-custom-styles",document.head.appendChild(e),M("set_custom_style",(t=>{e.innerHTML=t}))}(),l("iframe_ready",{reload_supported:!0}),M("reload_iframe",(()=>{l("iframe_will_reload"),window.location.reload()})));const b={backButton:Oe(p,r,l),closingBehavior:Ie(p,l),cloudStorage:new te(r,h,l),createRequestId:h,hapticFeedback:new se(r,l),invoice:new ae(r,l),mainButton:qe(p,a.buttonColor||"#000000",a.buttonTextColor||"#ffffff",l),miniApp:Be(p,a.backgroundColor||"#ffffff",r,c,h,l),popup:new ge(r,l),postEvent:l,qrScanner:new fe(r,l),settingsButton:Ae(p,r,l),themeParams:Te(a),utils:new we(r,h,l),...e?{initData:new ne(e),initDataRaw:t}:{}},y=function(e,t,s,n){const i=e?Pe("viewport"):null;if(i)return Ve({...i,postEvent:s});if(function(e){return["macos","tdesktop","unigram","web","weba"].includes(e)}(t))return Ve({height:window.innerHeight,isExpanded:!0,postEvent:s,stableHeight:window.innerHeight,width:window.innerWidth});if(n)return ye({postEvent:s,timeout:5e3}).then((({height:e,isStateStable:t,...s})=>Ve({...s,height:e,stableHeight:t?e:0})));const r=Ve({width:0,height:0,isExpanded:!1,postEvent:s,stableHeight:0});return r.sync({postEvent:s,timeout:5e3}).catch((e=>{console.error("Unable to actualize viewport state",e)})),r}(p,o,l,s);return y instanceof Promise||s?Promise.resolve(y).then((e=>(De(n,b.miniApp,b.themeParams,e),{...b,viewport:e}))):(De(n,b.miniApp,b.themeParams,y),{...b,viewport:y})}catch(r){if(s)return Promise.reject(r);throw r}}({complete:!0}).then((e=>{var t,s;const{viewport:n,mainButton:i,initData:r}=e;n.expand(),i.setText("Join Paper $PLANE").enable().show().on("click",(()=>{window.open("https://t.me/paperplane_ton","_blank")}));const o=void 0!==(null==(t=null==r?void 0:r.user)?void 0:t.username)?r.user.username:void 0!==(null==(s=null==r?void 0:r.user)?void 0:s.firstName)?r.user.firstName:"Guest";localStorage.setItem("username",o)})).catch(console.error).finally((()=>{this.scene.start("MainMenu")}))}}const Ge={type:Phaser.AUTO,width:1200,height:1600,parent:"game-container",backgroundColor:"#111",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[i,je,o]};new s.Game(Ge);
