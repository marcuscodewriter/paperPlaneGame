var t=Object.defineProperty,e=(e,a,o)=>(((e,a,o)=>{a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[a]=o})(e,"symbol"!=typeof a?a+"":a,o),o);import{p as a}from"./phaser-cxBNu8M8.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const a of t)if("childList"===a.type)for(const t of a.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}(),window.Telegram.WebApp.ready();var o=window.Telegram.WebApp.initDataUnsafe.user,i="Guest";o&&(o.username&&o.username.length>0?i=o.username:o.first_name&&o.first_name.length>0&&(i=o.first_name)),window.Telegram.WebApp.MainButton.setText("Join Paper $PLANE"),window.Telegram.WebApp.MainButton.onClick((function(){window.Telegram.WebApp.openTelegramLink("https://t.me/paperplane_ton")})),window.Telegram.WebApp.MainButton.enable(),window.Telegram.WebApp.MainButton.show(),PlayFab.settings.titleId="F6BAC",PlayFab.settings.developerSecretKey={VITE_TITLE_ID:"F6BAC",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_DEVELOPER_SECRET_KEY,"Guest"!==i&&window.localStorage.setItem("username",i);var s={TitleId:PlayFab.settings.titleId,CustomId:i,CreateAccount:!0};PlayFabClientSDK.LoginWithCustomID(s,(function(t,e){null!==t?window.localStorage.setItem("sessionData",JSON.stringify(t.data)):null!==e&&console.error(PlayFab.GenerateErrorReport(e))}));class n extends a.Scene{constructor(){super("Boot")}preload(){this.load.spritesheet("loadingSpritesheet","assets/loadingSpritesheet.png",{frameWidth:296,frameHeight:154}),window.document.getElementById("loading").style.display="block"}create(){this.scene.start("Preloader")}}const r="EQAX9J60va-0wIDMdqGLRMf7imJvG0Ytyi3Yxnq9y-nbNCq2";class l extends a.Scene{constructor(){super("MainMenu"),e(this,"background"),e(this,"profileButton"),e(this,"soundButton"),e(this,"telegramButton"),e(this,"titleImage"),e(this,"player"),e(this,"playButton"),e(this,"leaderboardButton"),e(this,"planeButton"),e(this,"planeButtonText"),e(this,"tonButton"),e(this,"tonButtonText"),e(this,"highscores"),e(this,"leaderboard")}preload(){this.load.scenePlugin({key:"rexuiplugin",url:"https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/dist/rexuiplugin.min.js",sceneKey:"rexUI"}),this.load.bitmapFont("gothic","https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/assets/fonts/gothic.png","https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/assets/fonts/gothic.xml")}create(){const t=this.sys.game.config.width,e=this.sys.game.config.height;this.setupBackground(t,e),this.setupHeader(t,e),this.setupPlayer(t,e),this.setupFooter(t,e),this.retrievePrices(),this.setupMusic(),this.setupHighscores(),this.showLeaderboard(t,e)}setupMusic(){this.sound.add("bgMusic",{loop:!0}).play(),"false"===(localStorage.getItem("music")??"true")?this.sound.mute=!0:this.sound.mute=!1}setupBackground(t,e){this.background=this.add.image(t/2,e/2,"background").setOrigin(.5,.5);const a=t/this.background.width,o=e/this.background.height,i=Math.max(a,o);this.background.setScale(i),this.tweens.add({targets:this.background,scale:1.05*i,duration:3e3,yoyo:!0,ease:"Sine.easeInOut",repeat:-1})}setupHeader(t,e){this.profileButton=this.add.image(t/3,100,"profileButton").setScale(1.2).setInteractive().on("pointerup",(()=>{this.showHighscores(t,e)}));const a="false"===localStorage.getItem("music");this.soundButton=this.add.image(t/2,100,a?"soundOff":"soundOn").setScale(1.2).setInteractive().on("pointerup",(()=>{"false"===localStorage.getItem("music")?(this.sound.mute=!1,localStorage.setItem("music","true"),this.soundButton.setTexture("soundOn")):(this.sound.mute=!0,localStorage.setItem("music","false"),this.soundButton.setTexture("soundOff"))})),this.telegramButton=this.add.image(2*t/3,100,"telegramButton").setScale(1.2).setInteractive().on("pointerup",(()=>{window.open("https://t.me/paperplane_ton","_blank")})),this.titleImage=this.add.image(t/2,-30,"titleImage").setOrigin(.5,0).setScale(.8),this.tweens.chain({targets:this.titleImage,loop:-1,tweens:[{scale:.87,duration:2e3,ease:"Sine.easeInOut"},{scale:.8,duration:2e3,ease:"Sine.easeInOut"}]}),this.tweens.chain({targets:this.titleImage,loop:-1,tweens:[{angle:-2,duration:1e3,ease:"Sine.easeOut"},{angle:2,duration:2e3,ease:"Sine.easeInOut"},{angle:0,duration:1e3,ease:"Sine.easeIn"}]})}setupPlayer(t,e){this.player=this.add.image(t/2,.58*e,"plane");const a=t/this.player.width,o=e/this.player.height,i=Math.min(a,o);this.player.setScale(.93-i),this.tweens.add({targets:this.player,loop:-1,yoyo:!0,ease:"Sine.easeInOut",duration:1500,props:{y:"-=175"}})}setupFooter(t,e){const a=.73*e,o=.835*e,i=.94*e;this.playButton=this.add.image(t/2+60,a,"playButton").setScale(1.9,1.9).setOrigin(0,.5).setInteractive().on("pointerup",(()=>{this.showSelection(t,e)})),this.leaderboardButton=this.add.image(t/2+65,a,"leaderboardButton").setScale(1.9,2.5).setOrigin(1,.5).setInteractive().on("pointerup",(()=>{this.showLeaderboard(t,e)})),this.planeButton=this.add.image(t/2,o,"buttonBG").setScale(2.6,2).setOrigin(.5).setInteractive().on("pointerup",(()=>{window.open("https://www.geckoterminal.com/ton/pools/EQC1u0sVIjCIS4ldxfOC86nQlBkOeEO7mw4VcLGxYH_ZYgXh/","_blank")})),this.planeButtonText=this.add.text(this.planeButton.x,this.planeButton.y,localStorage.getItem("planePrice")??"",{fontFamily:"Arial",fontStyle:"bold",fontSize:44,color:"#208CE7",align:"center"}).setOrigin(.5),this.tonButton=this.add.image(t/2,i,"buttonBG").setScale(2.6,2).setOrigin(.5).setInteractive().on("pointerup",(()=>{window.open("https://coinmarketcap.com/currencies/toncoin/","_blank")})),this.tonButtonText=this.add.text(this.tonButton.x,this.tonButton.y,localStorage.getItem("tonPrice")??"",{fontFamily:"Arial",fontStyle:"bold",fontSize:44,color:"#208CE7",align:"center"}).setOrigin(.5)}async retrievePrices(){const t="https://tonapi.io/v2/rates?tokens=ton,"+r+"&currencies=usd",e=await fetch(t),a=(await e.json()).rates,o=a[r],i=o.diff_24h.USD,s=o.prices.USD,n=a.TON,l=n.diff_24h.USD,d=n.prices.USD,c="$PLANE\n$"+s.toFixed(3)+"  "+i,h="$TON\n$"+d.toFixed(2)+"  "+l,g={x:this.planeButton.x,y:this.planeButton.y},u={x:this.tonButton.x,y:this.tonButton.y};void 0===localStorage.getItem("planePrice")?this.planeButtonText=this.add.text(g.x,g.y,c,{fontFamily:"Arial",fontStyle:"bold",fontSize:44,color:"#208CE7",align:"center"}).setOrigin(.5):this.planeButtonText.setText(c),void 0===localStorage.getItem("tonPrice")?this.tonButtonText=this.add.text(u.x,u.y,h,{fontFamily:"Arial",fontStyle:"bold",fontSize:44,color:"#208CE7",align:"center"}).setOrigin(.5):this.tonButtonText.setText(h),localStorage.setItem("planePrice",c),localStorage.setItem("tonPrice",h)}setupHighscores(){const t=JSON.parse(window.localStorage.getItem("sessionData"));for(let e=0;e<7;e++)fetch("https://F6BAC.playfabapi.com/Client/GetLeaderboardAroundPlayer",{method:"POST",body:JSON.stringify({StatisticName:"BestScore_"+e,MaxResultsCount:1,PlayFabId:t.PlayFabId}),headers:{"Content-Type":"application/json","X-Authorization":t.SessionTicket}}).then((t=>t.json())).then((t=>{localStorage.setItem("BestScore_"+e,t.data.Leaderboard[0].StatValue)}))}showHighscores(t,e){const a=1.5;this.highscores=this.add.container(t/2,e/2,[this.add.rectangle(0,0,t,e,0,.6),this.add.image(0,0,"panel").setDisplaySize(.72*t,.66*e).setOrigin(.5,.54),this.add.text(0,.26*-e,(localStorage.getItem("username")??"Guest").toUpperCase(),{fontFamily:"Arial",fontStyle:"bold",fontSize:56,color:"#000"}).setOrigin(.5,a),this.add.text(0,.19*-e,"HANDCUFFS BEST: "+(localStorage.getItem("BestScore_0")??"0"),{fontFamily:"Arial",fontStyle:"italic",fontSize:48,color:"#000"}).setOrigin(.5,a),this.add.text(0,.13*-e,"TONK BEST: "+(localStorage.getItem("BestScore_1")??"0"),{fontFamily:"Arial",fontStyle:"italic",fontSize:48,color:"#000"}).setOrigin(.5,a),this.add.text(0,.07*-e,"TONSHIP BEST: "+(localStorage.getItem("BestScore_2")??"0"),{fontFamily:"Arial",fontStyle:"italic",fontSize:48,color:"#000"}).setOrigin(.5,a),this.add.text(0,.01*-e,"TONFISH BEST: "+(localStorage.getItem("BestScore_3")??"0"),{fontFamily:"Arial",fontStyle:"italic",fontSize:48,color:"#000"}).setOrigin(.5,a),this.add.text(0,.05*e,"RESISTANCE DOG BEST: "+(localStorage.getItem("BestScore_4")??"0"),{fontFamily:"Arial",fontStyle:"italic",fontSize:48,color:"#000"}).setOrigin(.5,a),this.add.text(0,.11*e,"CRYPTON BEST: "+(localStorage.getItem("BestScore_5")??"0"),{fontFamily:"Arial",fontStyle:"italic",fontSize:48,color:"#000"}).setOrigin(.5,a),this.add.text(0,.17*e,"OYSTER LABS BEST: "+(localStorage.getItem("BestScore_6")??"0"),{fontFamily:"Arial",fontStyle:"italic",fontSize:48,color:"#000"}).setOrigin(.5,a),this.add.image(0,.275*e,"done").setDisplaySize(200,180).setInteractive().on("pointerup",(()=>{this.highscores.alpha=0,this.highscores.destroy()})).setOrigin(.5,.8)]).setSize(t,e).setInteractive()}showLeaderboard(t,e){var a="";switch(window.localStorage.getItem("Obstacle")){case"0":default:a="HANDCUFFS";break;case"1":a="TONK";break;case"2":a="TONSHIP";break;case"3":a="TONFISH";break;case"4":a="RESISTANCE DOG";break;case"5":a="CRYPTON";break;case"6":a="OYSTER LABS"}var o=this.add.container().setSize(.7*t,.7*e),i=this.rexUI.add.scrollablePanel({height:.3*e,width:.7*t,scrollMode:"y",background:this.rexUI.add.roundRectangle({fillColor:0,radius:10}),panel:{child:o,mask:{padding:1}},slider:{track:this.rexUI.add.roundRectangle({width:20,radius:10,color:2493956}),thumb:this.rexUI.add.roundRectangle({radius:13,color:8085079})},mouseWheelScroller:{focus:!1,speed:.1},header:this.add.container(0,0,[this.add.text(0,.216*-e,a,{fontFamily:"Arial",fontStyle:"bold",fontSize:56,color:"#000"}).setOrigin(.5,1),this.add.text(.26*-t,.17*-e,"RANK",{fontFamily:"Arial",fontStyle:"italic",fontSize:48,color:"#000"}).setOrigin(.5,1),this.add.text(0,.17*-e,"NAME",{fontFamily:"Arial",fontStyle:"italic",fontSize:48,color:"#000"}).setOrigin(.5,1),this.add.text(.26*t,.17*-e,"SCORE",{fontFamily:"Arial",fontStyle:"italic",fontSize:48,color:"#000"}).setOrigin(.5,1)]).setSize(.7*t,50),space:{left:20,right:20,top:20,bottom:20,panel:3,header:50,footer:5}});i.layout(),this.add.container(t/2,e/2,[this.add.rectangle(0,0,.7*t,.7*e,4095,1),i.setOrigin(.5)]);const s=JSON.parse(window.localStorage.getItem("sessionData"));fetch("https://F6BAC.playfabapi.com/Client/GetLeaderboard",{method:"POST",body:JSON.stringify({StatisticName:"BestScore_"+window.localStorage.getItem("Obstacle"),MaxResultsCount:100}),headers:{"Content-Type":"application/json","X-Authorization":s.SessionTicket}}).then((t=>t.json())).then((e=>{e.data.Leaderboard.forEach(((e,a)=>{const i=72*a;console.log(i),o.add(this.add.text(.08*t,i,String(a+1),{fontFamily:"Arial",fontSize:"44px",color:"#fff"}).setOrigin(.5)),o.add(this.add.text(.36*t,i,e.DisplayName,{fontFamily:"Arial",fontSize:"44px",color:"#fff"}).setOrigin(.5)),o.add(this.add.text(.63*t,i,String(e.StatValue),{fontFamily:"Arial",fontSize:"44px",color:"#fff"}).setOrigin(.5)),o.setSize(0,i+64)})),i.layout()}))}showSelection(t,e){}}class d extends a.Scene{constructor(){super("Preloader")}init(){const t=this.sys.game.config.width,e=this.sys.game.config.height;this.add.text(t/2,.15*e,"Paper $PLANE Game",{align:"center",fontFamily:"Arial",fontStyle:"bold",fontSize:80,color:"#fff"}).setOrigin(.5);const a=this.add.rectangle(0,.6*e,0,28,16777215),o=this.add.text(512,.63*e+64,"Starting Jets . . . 0%",{fontFamily:"Arial",fontStyle:"bold",fontSize:64,color:"#fff"}).setOrigin(.5).setX(t/2);this.load.on("progress",(e=>{a.width=t*e,o.setText("Starting Jets . . . "+Math.floor(100*e)+"%"),o.setX(t/2)}))}preload(){this.load.audio("bgMusic",["sounds/music.mp3","sounds/music.ogg"]);const t=Math.floor(7*Math.random())+1;this.load.image("background","assets/bg_"+t+".png"),this.load.image("plane","assets/player_0.png"),this.load.image("profileButton","assets/profileButton.png"),this.load.image("soundOn","assets/soundOn.png"),this.load.image("soundOff","assets/soundOff.png"),this.load.image("telegramButton","assets/telegramButton.png"),this.load.image("titleImage","assets/titleImage.png"),this.load.image("panel","assets/panel.png"),this.load.image("done","assets/done.png"),this.load.image("playButton","assets/playButton.png"),this.load.image("leaderboardButton","assets/leaderboardButton.png"),this.load.image("buttonBG","assets/buttonBG.png"),window.localStorage.setItem("Character",window.localStorage.getItem("Character")??"0"),window.localStorage.setItem("Obstacle",window.localStorage.getItem("Obstacle")??"0"),window.localStorage.setItem("Background",window.localStorage.getItem("Background")??"0")}create(){window.document.getElementById("loading").style.display="none",this.scene.start("MainMenu")}}const c={type:Phaser.AUTO,width:1200,height:1600,parent:"game-container",backgroundColor:"#111",physics:{default:"arcade",arcade:{gravity:{x:0,y:200}}},scale:{mode:Phaser.Scale.HEIGHT_CONTROLS_WIDTH,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[n,d,l]};new a.Game(c);
